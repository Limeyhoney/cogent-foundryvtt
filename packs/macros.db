{"name":"Custom Dice Roll","permission":{"default":0,"mYjx68T8K5Y7LRIo":3},"type":"script","flags":{"core":{"sourceId":"Macro.MOxF8UmfHmbNFgcj"}},"scope":"global","command":"new Dialog({\n    title:'Custom Roll',\n    content:`\n    <form>\n        <div class=\"form-group\">\n            <label>Dice</label>\n            <input type='number' name='value' data-dtype=\"Number\"></input>\n        </div>\n        <div class=\"form-group\">\n            <label>Use Destiny?</label>\n            <input type='checkbox' name='destiny'></input>\n        </div>\n    </form>`,\n    buttons:{\n      yes: {\n        icon: \"<i class='fas fa-dice'></i>\",\n        label: `Roll`,\n        callback: (html) => {\n            let destiny = html.find('input[name=\\'destiny\\']').is(':checked');\n            let value = html.find('input[name=\\'value\\']').val();\n            let speaker = ChatMessage.getSpeaker();\n            let actor = game.actors.get(speaker[\"actor\"]);\n            if(value == \"\") {value = \"0\"};\n            value = parseInt(value);\n            let minimum = 4;\n            if (destiny == true) {minimum = 3;}\n            let rollData = {\n                num: value,\n                min: minimum\n            };\n            let rollFormula = \"@num d6cs>=@min\";\n            let messageData = {speaker: ChatMessage.getSpeaker()};\n            new Roll(rollFormula, rollData).roll().toMessage(messageData);\n        }\n      },\n      no: {\n        label: `Cancel`\n      }\n    },\n    default:'yes',\n    close: html => {\n       \n    }\n  }).render(true);","author":"mYjx68T8K5Y7LRIo","img":"icons/svg/dice-target.svg","actorIds":[],"_id":"Ji6rGdU0eEnmpGlL"}
{"_id":"sSaQcfKcNUTqtXaq","name":"Combat Roll","permission":{"default":0,"j40nkGBFFkBI63zv":3,"FUnajUygJZLXSSVQ":3,"G2u5vKHFMD1Gy5mb":3},"type":"script","folder":null,"sort":100001,"flags":{},"scope":"global","command":"new Dialog({\n    title:'Combat Roll',\n    content:`\n    <form>\n        <div class=\"form-group\">\n            <label>Dice from Weapon</label>\n            <input type='number' name='weapon' data-dtype=\"Number\"></input>\n        </div>\n        <div class=\"form-group\">\n            <label>Proficiency Bonus</label>\n            <input type='number' name='value' data-dtype=\"Number\" min=\"0\"></input>\n        </div>\n        <div class=\"form-group\">\n            <label>Total Other Maluses</label>\n            <input type='number' name='malus' data-dtype=\"Number\" min=\"0\"></input>\n        </div>\n        <div class=\"form-group\">\n            <label>Use Destiny?</label>\n            <input type='checkbox' name='destiny'></input>\n        </div>\n    </form>`,\n    buttons:{\n      yes: {\n        icon: \"<i class='fas fa-dice'></i>\",\n        label: `Roll`,\n        callback: (html) => {\n            let destiny = html.find('input[name=\\'destiny\\']').is(':checked');\n            let weapon = html.find('input[name=\\'weapon\\']').val();\n            let value = html.find('input[name=\\'value\\']').val();\n            let malus = html.find('input[name=\\'malus\\']').val();\n            let speaker = ChatMessage.getSpeaker();\n            let actor = game.actors.get(speaker[\"actor\"])\n            if(weapon == \"\") {weapon = \"0\"};\n            if(value == \"\") {value = \"0\"};\n            if(malus == \"\") {malus = \"0\"};\n            if (actor == null) {ui.notifications.error(\"Must have character token selected.\")}\n            else {game.cogent.cogentCombatRoll(actor, weapon, value, malus, destiny);}\n        }\n      },\n      no: {\n        label: `Cancel`\n      }\n    },\n    default:'yes',\n    close: html => {\n       \n    }\n  }).render(true);","author":"G2u5vKHFMD1Gy5mb","img":"icons/svg/dice-target.svg","actorIds":[]}
